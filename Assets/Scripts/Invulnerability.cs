using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Invulnerability : MonoBehaviour
{

    public GameObject ballOne;
    public int ballOneScore;
    public GameObject ballTwo;
    public int ballTwoScore;
    public GameObject ballThree;
    public int ballThreeScore;
    public int allScore;
    public int ballUltCharges;
    public int ballUltCounter;
    public int ballUltPrev;
    public GameObject mainCharacter;
    SpriteRenderer mat;
    Color32 firstColor;
    Color32 secondColor;
    // Start is called before the first frame update
    void Start()
    {
        ballOne = GameObject.Find("Circle1");
        ballTwo = GameObject.Find("OrbitCircle");
        ballThree = GameObject.Find("OrbitCircle (1)");
        mainCharacter = GameObject.Find("Character");
        mat = mainCharacter.GetComponent<SpriteRenderer>();
        firstColor = new Color32(53, 103, 250, 255);
        secondColor = new Color32(219, 52, 255, 255);
    }

    // Update is called once per frame
    void Update()
    {
        ballOneScore = ballOne.GetComponent<DestroyObject>().ballsHit;
        ballTwoScore = ballTwo.GetComponent<DestroyObject>().ballsHit;
        ballThreeScore = ballThree.GetComponent<DestroyObject>().ballsHit;

        allScore = ballOneScore + ballTwoScore + ballThreeScore;
        ballUltCounter = allScore - ballUltPrev;

        if (ballUltCounter == 1) {
            ballUltPrev += ballUltCounter;
            ballUltCounter = ballUltCounter - ballUltPrev;
            ballUltCharges += 1;
        }

        if ((Input.GetKeyDown(KeyCode.Space)) && ballUltCharges >= 1) {
            ballUltCharges -= 1;
            mainCharacter.GetComponent<DieOnImpact>().isInvulnerable = true;
            mat.color = firstColor;
            //set main character colour to blue
            Invoke("resetInvulnCircle", 5.0f);
        }
        
    }

    public void resetInvulnCircle() {
            mainCharacter.GetComponent<DieOnImpact>().isInvulnerable = false;
            mat.color = secondColor;
            //set main character colour to original

    }
}
