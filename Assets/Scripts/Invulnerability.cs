using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Invulnerability : MonoBehaviour
{

    public GameObject ballOne;
    public int ballOneScore;
    public GameObject ballTwo;
    public int ballTwoScore;
    public GameObject ballThree;
    public int ballThreeScore;
    public int allScore;
    public int ballUltCharges;
    public int ballUltCounter;
    public int ballUltPrev;
    public GameObject invulnCircle;
    public GameObject mainCharacter;
    // Start is called before the first frame update
    void Start()
    {
        ballOne = GameObject.Find("Circle1");
        ballTwo = GameObject.Find("OrbitCircle");
        ballThree = GameObject.Find("OrbitCircle (1)");
        mainCharacter = GameObject.Find("Character");
    }

    // Update is called once per frame
    void Update()
    {
        ballOneScore = ballOne.GetComponent<DestroyObject>().ballsHit;
        ballTwoScore = ballTwo.GetComponent<DestroyObject>().ballsHit;
        ballThreeScore = ballThree.GetComponent<DestroyObject>().ballsHit;

        allScore = ballOneScore + ballTwoScore + ballThreeScore;
        ballUltCounter = allScore - ballUltPrev;

        if (ballUltCounter == 2) {
            ballUltPrev += ballUltCounter;
            ballUltCounter = ballUltCounter - ballUltPrev;
            ballUltCharges += 1;
        }

        if ((Input.GetKeyDown(KeyCode.Space)) && ballUltCharges >= 1) {
            ballUltCharges -= 1;
            mainCharacter.GetComponent<DieOnImpact>().isInvulnerable = true;
            //set main character colour to blue
            Invoke("resetInvulnCircle", 5.0f);
        }
        
    }

    public void resetInvulnCircle() {
            mainCharacter.GetComponent<DieOnImpact>().isInvulnerable = false;
            //set main character colour to original

    }
}
